"use strict";var gs_base_gyroid=exports;!function(){if(self.base||(self.base={}),self.base.gyroid)return;var t=self.base;let l=2*Math.PI;function e(t,l){if(t.length<=2)return t;let e=[t[0]],h=t[1],n=null,r=t.length-2;for(let a=1;a<t.length;a++){let u=t[a];(l?s(h,u)<=l:h.x===u.x||h.y===u.y)&&(n=u,a<r)||(n?(e.push({x:(h.x+n.x)/2,y:(h.y+n.y)/2}),n=null):(e.push(h),a===r&&e.push(u)),h=u)}return e.push(t[t.length-1]),e}function s(t,l,e){let s=t.x-l.x,h=t.y-l.y;return"lr"===e&&(s/=2),"td"===e&&(h/=2),Math.sqrt(s*s+h*h)}t.gyroid={slice:function(t,h,n){let r=parseInt(h||200),a=l/r,u=l*t,o=n||0,f=[],i=[],p=0,g=0,c=0;for(let t=0;t<l;t+=a){let e=[],s=[];f.push(s),i.push(e);for(let h=0;h<l;h+=a)s.push(0),e.push(Math.sin(t)*Math.cos(h)+Math.sin(h)*Math.cos(u)+Math.sin(u)*Math.cos(t))}i.forEach((t,l)=>{let e=f[l],s=t[t.length-1];t.forEach((t,l)=>{(s<=o&&t>=o||s>=o&&t<=o||s<=-o&&t>=-o||s>=-o&&t<=-o)&&(e[l]=1,p++,g++),s=t})});for(let t=0;t<r;t++){let l=i[i.length-1][t];for(let e=0;e<r;e++){let s=i[e][t];(l<=o&&s>=o||l>=o&&s<=o||l<=-o&&s>=-o||l>=-o&&s<=-o)&&(f[e][t]?f[e][t]=3:(f[e][t]=2,p++),c++),l=s}}let d=c>g?"lr":"td",y=[],M=r/2;f.forEach((t,l)=>{t.forEach((t,e)=>{if(t){let s=Math.abs(e-M),h=Math.abs(l-M);y.push({x:e/r,y:l/r,val:t,dist:Math.max(s,h)})}})}),y.sort((t,l)=>l.dist-t.dist);let x,b,E=[],m=0;do{x=null;for(let t=0;t<y.length;t++)if(y[t]){x=[y[t]],E.push(x),y[t]=null,m++;break}do{b=!1;let t=x[x.length-1],l=null,e=null,h=1/0;for(let n=0;n<y.length;n++){let r=y[n];if(r){let a=s(t,r,d);(null===e||a<h)&&(e=n,l=r,h=a)}}if(l){if(h>.05)break;y[e]=null,m++,x.push(l),b=!0}}while(b)}while(m<y.length);let v=E.map(t=>e(t,0)).map(t=>e(t,a));return{edge:f,points:p,dir:d,polys:v}}}}();