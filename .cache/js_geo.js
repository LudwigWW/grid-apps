"use strict";var gs_base=exports;!function(){if(self.base||(self.base={}),!self.base.util){var e=self.base,n=8;e.key={NONE:"",PROJECT:"project",SEGINT:"segint",RAYINT:"rayint",PARALLEL:"parallel"},e.config={bridgeLineGapDistance:0,precision_offset:.05,precision_poly_area:.05,precision_poly_bounds:.01,precision_poly_merge:.05,precision_merge:1e-4,precision_slice_z:1e-4,precision_merge_sq:s(1e-4),precision_bounds:1e-4,precision_slope:.02,precision_slope_merge:.25,precision_fill_merge:.001,precision_decimate:.05,decimate_threshold:1e5,precision_point_on_line:.01,precision_circularity:.001,hint_len_min:s(3),hint_len_max:s(20),hint_min_circ:.15,precision_mask_tolerance:.001,precision_close_to_poly_sq:s(.001),precision_midpoint_check_dist:1,precision_nested_sq:s(.01),clipper:1e5,clipperClean:250},e.util={sqr:s,time:function(){return(new Date).getTime()},round:function(e,i){var r=Math.pow(10,i||n);return Math.round(e*r)/r},area2:r,distSq:function(e,n){return s(n.x-e.x)+s(n.y-e.y)},distSqv2:function(e,n,i,r){return s(i-e)+s(r-n)},inRange:function(e,n,i){var r=parseFloat(e);return r>=n&&r<=i},isCloseTo:t,inCloseRange:o,isCollinear:function(e,n,i){return o(r(e,n,i),-1e-5,1e-5)},isClockwise:function(e,n,i){return r(e,n,i)>0},isCounterClockwise:function(e,n,i){return r(e,n,i)<0},doCombinations:function(e,n,i,r){var t,o;for(t=0;t<e.length;t++)for(o=e===n?t+1:0;o<n.length;o++)r(e[t],n[o],i);return i},offsetPrecision:function(e,n){return Math.abs(e)-n},intersectRayLine:function(n,i,r,t,s){var c=e.key,u=n.x,a=n.y,l=i.dx,p=i.dy,_=r.x,f=r.y,y=t.x-_,m=t.y-f,d=m*l-y*p,g=a-f,x=u-_,h=y*g-m*x,v=l*g-p*x;if(Math.abs(d)<1e-12)return null;if(g=h/d,x=v/d,s||o(x,0,1)&&g>=0){var b=e.newPoint(u+g*l,a+g*p,t.z||n.z,c.NONE);return b.dist=g,b.p1=r,b.p2=t,b}return null},intersect:function(n,i,r,t,o,s){var c=e.key,u=n.x,a=n.y,l=i.x,p=i.y,_=r.x,f=r.y,y=l-u,m=p-a,d=t.x-_,g=t.y-f,x=g*y-d*m;if(Math.abs(x)<1e-4)return o&&!s?null:c.PARALLEL;var h=a-f,v=u-_,b=d*h-g*v;v=(y*h-m*v)/x;var C=(h=b/x)>=-1e-4&&h<=1.0001&&v>=-1e-4&&v<=1.0001,N=h>=0&&v>=0;if(o===c.SEGINT&&!C)return null;if(o===c.RAYINT&&!N)return null;var R=e.newPoint(u+h*y,a+h*m,r.z||t.z,C?c.SEGINT:N?c.RAYINT:c.PROJECT);return R.dist=h,R.p1=r,R.p2=t,R},determinant:function(e,n,i,r){var t=n.x-e.x,o=n.y-e.y,s=r.x-i.x;return(r.y-i.y)*t-s*o},comma:e=>{let[n,i]=e.toString().split(".");return n=n.toString().split("").reverse().map((e,n,i)=>n<i.length-1&&n%3==2?`,${e}`:e).reverse().join(""),i?`${n}.${i}`:n}}}function i(e,n){return(n.x-e.x)*(n.y+e.y)}function r(e,n,r){return i(e,n)+i(n,r)+i(r,e)}function t(n,i,r){return Math.abs(n-i)<=(r||e.config.precision_merge)}function o(e,n,i){return(t(e,n)||e>=n)&&(t(e,i)||e<=i)}function s(e){return e*e}}();