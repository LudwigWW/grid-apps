"use strict";var gs_moto_ui=exports;!function(){var t=self.moto=self.moto||{};if(t.ui)return;let e=self,n=null,i=null,l=null,o=null,s=null,r=null,u={},a={},c=void 0,d={},p=[],f=null,h=!1,b=t.KV,m=e.document,w="tab",v="nomode",A=!1,y=void 0;function g(t){A&&($("control-left").classList.add("compact"),$("control-right").classList.add("compact"),Object.keys(a).forEach(t=>{x(t)})),f=t,p.forEach(function(e){e.setMode(e._group&&!a[e._group]?v:t)})}function E(){A&&C(void 0)}function C(t){Object.keys(u).forEach(e=>{let n=u[e];a[e]=b[n.key]=t===e,x(e)})}function x(t){let e=a[t]||!d[t];u[t].forEach(t=>{e?t.setMode(f):t.setMode(v)})}function _(t){let e=m.createElement("label");return e.appendChild(m.createTextNode(t)),e.setAttribute("class","noselect"),e}function k(t,e){e&&e.id&&t.setAttribute("id",e.id)}function T(t,e){e=e||{},t.__show=!0,t.__modeSave=null,t.showMe=function(){t.__show||(t.style.display=t.__modeSave,t.__show=!0,t.__modeSave=null)},t.hideMe=function(){t.__show&&(t.__show=!1,t.__modeSave=t.style.display,t.style.display="none")},t.setVisible=function(e){e?t.showMe():t.hideMe()},t.setMode=function(n){let i=void 0===e.expert||e.expert===h;t.setVisible(t.hasMode(n)&&i)},t.hasMode=function(e){return e!==v&&(!t.modes||t.modes.contains(e))},e.modes&&(t.modes=e.modes,p.push(t))}function V(t){let e=m.createElement("div");return T(e,t),o.appendChild(e),i.push(e),e._group=c,e}e.$=e.$||function(t){return m.getElementById(t)},t.ui={prefix:function(e){return w=e,t.ui},hideAction:function(e){return s=e,t.ui},inputAction:function(e){return r=e,t.ui},setMode:g,setExpert:function(t){h=t,g(f)},bound:function(t,e){return function(n){return isNaN(n)?t:n<t?t:n>e?e:n}},toInt:function(){let t=""!==this.value?parseInt(this.value):null;isNaN(t)&&(t=0);null!==t&&this.bound&&(t=this.bound(t));return this.value=t,t},toFloat:function(){let t=""!==this.value?parseFloat(this.value):null;null!==t&&this.bound&&(t=this.bound(t));return this.value=t,t},hidePop:L,isPopped:function(){return null!==M},newText:function(t,e){let n=e||{},i=V(e),l=m.createElement("button"),o=m.createElement("div"),s=m.createElement("div"),u=m.createElement("label"),a=m.createElement("textarea");s.setAttribute("class","poptext flow-col"),o.setAttribute("style","position: relative"),o.appendChild(s),s.appendChild(u),s.appendChild(a),u.appendChild(m.createTextNode(t)),a.setAttribute("cols",40),a.setAttribute("rows",20),a.setAttribute("wrap","off"),l.appendChild(m.createTextNode("edit")),l.onclick=function(t){if(t.stopPropagation(),t.target===a)t.target.focus();else{l.parentNode.appendChild(o),l.parentNode.onclick=l.onclick,a.scrollTop=0,a.scrollLeft=0,a.selectionEnd=0;let t=a.value.split("\n"),e=0;t.forEach(t=>{e=Math.max(e,t.length)}),a.setAttribute("cols",Math.max(30,e+1)),a.setAttribute("rows",Math.max(10,t.length+1));let n=s===M;L(),n?r():(N=r,s.style.display="flex",M=s,a.focus())}},T(l,n),k(l,n),i.appendChild(_(t)),i.appendChild(l),i.setAttribute("class","flow-row"),n.title&&i.setAttribute("title",e.title);return l.setVisible=i.setVisible,a},newLabel:_,newRange:function(t,e){let n=V(e),i=m.createElement("input"),l=e&&e.hide,o=r;t&&n.appendChild(_(t));n.appendChild(i),n.setAttribute("class","flow-row"),i.setAttribute("type","range"),i.setAttribute("min",e&&e.min?e.min:0),i.setAttribute("max",e&&e.max?e.max:100),i.setAttribute("value",0),n.style.display=l?"none":"",e&&(e.title&&(i.setAttribute("title",e.title),n.setAttribute("title",e.title)),e.action&&(o=e.action));return i.setVisible=n.setVisible,i},newInput:function(t,e){let n=e||{},i=V(n),l=n&&n.hide,o=n&&n.size||5,s=n?n.height:0,u=s>1?m.createElement("textarea"):m.createElement("input"),a=n.action||r;i.appendChild(_(t)),i.appendChild(u),i.setAttribute("class","flow-row"),s>1?(u.setAttribute("cols",o),u.setAttribute("rows",s),u.setAttribute("wrap","off")):Number.isInteger(o)?u.setAttribute("size",o):u.setAttribute("style",`width:${o}`);u.setAttribute("type","text"),i.style.display=l?"none":"",n&&(n.disabled&&u.setAttribute("disabled","true"),n.title&&i.setAttribute("title",n.title),n.convert&&(u.convert=n.convert.bind(u)),n.bound&&(u.bound=n.bound),n.action&&(a=n.action));u.addEventListener("focus",function(t){L()}),a&&(u.addEventListener("keydown",function(t){let i=t.key;n.text||i>="0"&&i<="9"||"."===i||"-"===i||"Backspace"===i||"Delete"===i||"ArrowLeft"===i||"ArrowRight"===i||"Tab"===i||t.metaKey||t.ctrlKey||","===i&&e.comma||(t.preventDefault(),t.stopPropagation())}),u.addEventListener("keyup",function(t){13===t.keyCode&&u.blur()}),u.addEventListener("blur",function(t){a(t)}));u.convert||(u.convert=function(){return""!==this.value?this.value:null}.bind(u));return u.setVisible=i.setVisible,u},newButton:function(t,e,n){let i=m.createElement("button"),l=m.createTextNode(t);i.appendChild(l),i.onclick=function(){A&&E(),e&&e()},n&&n.class&&i.classList.add(n.class);return T(i,n),k(i,n),i},newBoolean:function(t,e,n){let i=V(n),l=m.createElement("input"),o=n&&n.hide;t&&i.appendChild(_(t));i.appendChild(l),i.setAttribute("class","flow-row"),i.style.display=o?"none":"",l.setAttribute("type","checkbox"),l.checked=!1,n&&(n.disabled&&l.setAttribute("disabled","true"),n.title&&(l.setAttribute("title",n.title),i.setAttribute("title",n.title)));e&&(l.onclick=function(){e()});return l.setVisible=i.setVisible,l},newSelect:function(t,e,n){let i=V(e),l=m.createElement("select"),o=e&&e.hide,s=r;i.appendChild(_(t)),i.appendChild(l),i.setAttribute("source",n||"tools"),i.setAttribute("class","flow-row"),i.style.display=o?"none":"",e&&(e.convert&&(l.convert=e.convert.bind(l)),e.disabled&&l.setAttribute("disabled","true"),e.title&&i.setAttribute("title",e.title),e.action&&(s=e.action));return l.onchange=function(){s()},l.setVisible=i.setVisible,l},newTable:S,newTableRow:function(t,e){return B(S(t),e)},newRow:B,newBlank:function(t){let e=V(t),n=t&&t.hide;return e.setAttribute("class","flow-row"),e.style.display=n?"none":"",ip.setVisible=e.setVisible,ip},newGroup:function(t,e,s){return function(t,e,s){let r=s||{},p=r.group||t;n=r.region||n,d[p]=!0!==r.nocompact;let f=m.createElement("div"),h=m.createElement("a"),v=`${w}-show-${p}`,g=A&&!r.nocompact;if(g){let t=m.createElement("div");t.classList.add("popper"),n&&t.classList.add(n),f.appendChild(t),o=t}else o=l;return e.appendChild(f),f.setAttribute("class","grouphead noselect"),f.appendChild(h),h.appendChild(m.createTextNode(t)),T(f,r),(i=u[p]=[]).key=v,c=p,a[p]=g?"true"===b[v]:"false"!==b[v],f.onclick=function(t){t.target!==h&&t.target!==f||function(t,e){let n="false"===b[e];a[t]=!d[t]||(b[e]=n),x(t)}(p,v)},g&&(f.onmouseenter=function(t){t.target!==h&&t.target!==f||(clearTimeout(y),C(p))},f.onmouseleave=function(t){t.target!==h&&t.target!==f||(clearTimeout(y),y=setTimeout(C,1e3))},o._group=p,T(o,r),i.push(o)),f}(t,l=e||l,s)},setGroup:function(t){return o=l=t,c=void 0,i=[],t},setCompact:function(t){return A=t,this},setDefaults:function(t){Object.keys(localStorage).forEach(e=>{let n=`${w}-show-`;0===e.indexOf(n)&&(localStorage[e]=t)})},hidePoppers:E,checkpoint:function(){return{addTo:o,lastDiv:l,lastGroup:i,lastRegion:n,groupName:c}},restore:function(t){t&&(o=t.addTo,l=t.lastDiv,i=t.lastGroup,n=t.lastRegion,c=t.groupName)}};let M=null,N=null;function L(){M&&(M.style.display="none"),N&&(N(),N=null),M=null}function S(t){let e=[];for(let n=0;n<t.length;n++)e.push(R(t[n]));return e}function R(t){let e=V();return e.setAttribute("class","tablerow"),t.forEach(function(t){e.appendChild(t)}),e}function B(t,e){let n=function(t){let e=V();t&&t.appendChild(e);i&&i.push(e);return e}(e&&e.noadd?null:o);return t&&t.forEach(function(t){n.appendChild(t)}),T(n,e),n}}();